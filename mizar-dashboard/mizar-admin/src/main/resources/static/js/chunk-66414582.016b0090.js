(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66414582","chunk-d49b2eb2"],{"0640":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("MisSearch",{attrs:{params:e.queryParams,fields:e.searchFields},on:{click:e.fetchData}}),a("Add",{attrs:{title:"添加应用",size:"small"},on:{close:e.close}})],1),a("MisTable",{ref:"mistable",attrs:{url:"/app/page",params:e.queryParams,"table-fields":e.tableFields}},[a("template",{slot:"action"},[a("el-table-column",{attrs:{label:"操作",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("Add",{key:t.row.id,attrs:{title:"编辑",type:"text",model:t.row},on:{close:e.close}}),a("ex-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",confirm:"确认删除应用吗"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v(" 删除 ")])]}}])})],1),a("template",{slot:"machineList"},[a("el-table-column",{attrs:{label:"机器列表",width:"210",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("ex-button",{attrs:{type:"text"},on:{click:function(a){return e.handleMachineList(t.row)}}},[e._v("查看")])]}}])})],1)],2)],1)},n=[],r=a("82d8"),l=a("66a8"),s={tableFields:[{label:"ID",key:"id",width:"100"},{label:"应用",key:"appName"},{label:"名称",key:"name"},{label:"机器列表",key:"machineList"},{label:"操作",key:"action"}],searchFields:[{label:"应用",key:"appName"}]},o=s,u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",[a("el-button",{attrs:{type:e.type,size:e.size},on:{click:function(t){e.visible=!0}}},[e._v(" "+e._s(e.title)+" ")]),a("el-dialog",{attrs:{title:e.title,visible:e.visible,"before-close":e.closeAddDialog,"append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"AppName",prop:"appName"}},[a("el-input",{attrs:{autocomplete:"off",disabled:null!=e.form.id},model:{value:e.form.appName,callback:function(t){e.$set(e.form,"appName",t)},expression:"form.appName"}})],1)],1),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeAddDialog}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},c=[],p=a("51d8"),d={props:{size:{required:!1,type:String},type:{required:!1,type:String,default:"primary"},title:{required:!1,type:String},model:{required:!1,type:Object}},data:function(){return{visible:!1,form:{name:"",appName:""},rules:{appName:[{required:!0,message:"请输入appName",trigger:"blur"},{min:3,max:100,message:"长度在 3 到 100 个字符",trigger:"blur"}],name:[{required:!0,message:"请输应用名称",trigger:"blur"},{min:3,max:500,message:"长度在3个以上",trigger:"blur"}]}}},created:function(){null!=this.model&&(this.form=this.model)},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){t&&e.action()}))},action:function(){var e=this;null==this.form.id?Object(p["a"])(this.form).then((function(t){e.$message.success("操作成功"),e.visible=!1,e.$emit("close",1)})):Object(p["d"])(this.form).then((function(t){e.$message.success("操作成功"),e.visible=!1,e.$emit("close",1)}))},closeAddDialog:function(){this.visible=!1,this.$emit("close")}}},m=d,f=a("2877"),h=Object(f["a"])(m,u,c,!1,null,null,null),g=h.exports,b={components:{MisTable:r["a"],MisSearch:l["a"],Add:g},data:function(){return{tableFields:o.tableFields,searchFields:o.searchFields,queryParams:{},secretTipShow:!1}},created:function(){},methods:{fetchData:function(){console.log(this.queryParams),this.$refs.mistable.fetchData()},close:function(e){console.log("close"),null!==e&&(console.log("close22"),this.fetchData())},handleDelete:function(e){var t=this,a={id:e.id};Object(p["b"])(a).then((function(e){t.$msg.msgSuccess("删除成功"),t.fetchData()}))},handleMachineList:function(e){var t="/machine/"+e.appName;this.$router.push({path:t})}}},y=b,v=Object(f["a"])(y,i,n,!1,null,null,null);t["default"]=v.exports},"333d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},n=[],r=(a("a9e3"),{name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e})},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize})}}}),l=r,s=(a("348f"),a("2877")),o=Object(s["a"])(l,i,n,!1,null,"7a214f40",null);t["a"]=o.exports},"348f":function(e,t,a){"use strict";a("3d25")},"3d25":function(e,t,a){},"66a8":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,size:"small",inline:!0,"label-width":"68px"}},[e._l(e.searchFields,(function(t){return a("el-form-item",{attrs:{label:t.label,prop:"applicant"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.queryParams[t.key],callback:function(a){e.$set(e.queryParams,t.key,a)},expression:"queryParams[item.key]"}})],1)})),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.fetchData}},[e._v("搜索")])],1)],2)],1)},n=[],r={name:"MisSearch",props:{params:{required:!1,type:Object},fields:{required:!1,type:Array}},data:function(){return{queryParams:{},searchFields:[{label:"ID",key:"id"}]}},created:function(){this.queryParams=this.params,null!=this.fields&&(this.searchFields=this.fields)},methods:{fetchData:function(){this.$emit("click",this.queryParams)}}},l=r,s=a("2877"),o=Object(s["a"])(l,i,n,!1,null,"56c85fa3",null);t["a"]=o.exports},"82d8":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[e._l(e.tableFields,(function(t,i){return[e.$slots[t.key]?e._e():a("el-table-column",{key:i,attrs:{align:"center",label:t.label,width:t.width},scopedSlots:e._u([{key:"default",fn:function(i){return[null==t.type?a("div",[e._v(e._s(i.row[t.key]))]):e._e(),"dict"==t.type?a("div",[a("span",[e._v(" "+e._s(e.dictOptions(t.options,i.row[t.key]).label)+" ")])]):e._e()]}}],null,!0)}),e.$slots[t.key]?e._t(t.key):e._e()]}))],2),a("Pagination",{attrs:{total:e.total,page:e.page.pageNum,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageNum",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.fetchData}})],1)},n=[],r=(a("d3b7"),a("159b"),a("d4ec")),l=a("bee2"),s=a("b775"),o=function(){function e(){Object(r["a"])(this,e)}return Object(l["a"])(e,[{key:"post",value:function(e,t){return Object(s["a"])({url:e,method:"post",data:t})}},{key:"get",value:function(e,t){return console.log("get:"+e),Object(s["a"])({url:e,method:"get",params:{params:t}})}}]),e}(),u=new o,c=u,p=a("333d"),d={name:"MisTable",props:{url:{required:!0,type:String},tableFields:{required:!0,type:Array},params:{required:!1,type:Object}},components:{Pagination:p["a"]},data:function(){return{list:null,listLoading:!0,queryParams:{},page:{pageNum:1,pageSize:20},total:0}},watch:{params:{deep:!0,immediate:!0,handler:function(e){null!=e&&(this.queryParams=this.params)}}},created:function(){null!=this.params&&(this.queryParams=this.params),this.fetchData()},methods:{setPage:function(e,t){this.page.pageNum=e,this.page.pageSize=t},fetchData:function(){var e=this;this.listLoading=!0,this.queryParams.page=this.page,c.post(this.url,this.queryParams).then((function(t){e.list=t.data.list,e.listLoading=!1,t.data.total&&(e.total=t.data.total)}))},dictOptions:function(e,t){if(console.log(t),null==e)return null;var a={};return e.forEach((function(e){if(e.value===t)return a=e,a})),a}}},m=d,f=a("2877"),h=Object(f["a"])(m,i,n,!1,null,"18c8be47",null);t["a"]=h.exports},bee2:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a("a38e");function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Object(i["a"])(n.key),n)}}function r(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}},d4ec:function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}a.d(t,"a",(function(){return i}))}}]);