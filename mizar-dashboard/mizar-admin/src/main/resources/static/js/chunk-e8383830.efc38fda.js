(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e8383830"],{"333d":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},r=[],s=(a("a9e3"),{name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e})},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize})}}}),i=s,n=(a("348f"),a("2877")),o=Object(n["a"])(i,l,r,!1,null,"7a214f40",null);t["a"]=o.exports},"348f":function(e,t,a){"use strict";a("3d25")},"3d25":function(e,t,a){},"66a8":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,size:"small",inline:!0,"label-width":"68px"}},[e._l(e.searchFields,(function(t){return a("el-form-item",{attrs:{label:t.label,prop:"applicant"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.queryParams[t.key],callback:function(a){e.$set(e.queryParams,t.key,a)},expression:"queryParams[item.key]"}})],1)})),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.fetchData}},[e._v("搜索")])],1)],2)],1)},r=[],s={name:"MisSearch",props:{params:{required:!1,type:Object},fields:{required:!1,type:Array}},data:function(){return{queryParams:{},searchFields:[{label:"ID",key:"id"}]}},created:function(){this.queryParams=this.params,null!=this.fields&&(this.searchFields=this.fields)},methods:{fetchData:function(){this.$emit("click",this.queryParams)}}},i=s,n=a("2877"),o=Object(n["a"])(i,l,r,!1,null,"56c85fa3",null);t["a"]=o.exports},"82d8":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[e._l(e.tableFields,(function(t,l){return[e.$slots[t.key]?e._e():a("el-table-column",{key:l,attrs:{align:"center",label:t.label,width:t.width},scopedSlots:e._u([{key:"default",fn:function(l){return[null==t.type?a("div",[e._v(e._s(l.row[t.key]))]):e._e(),"dict"==t.type?a("div",[a("span",[e._v(" "+e._s(e.dictOptions(t.options,l.row[t.key]).label)+" ")])]):e._e()]}}],null,!0)}),e.$slots[t.key]?e._t(t.key):e._e()]}))],2),a("Pagination",{attrs:{total:e.total,page:e.page.pageNum,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageNum",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.fetchData}})],1)},r=[],s=(a("d3b7"),a("159b"),a("d4ec")),i=a("bee2"),n=a("b775"),o=function(){function e(){Object(s["a"])(this,e)}return Object(i["a"])(e,[{key:"post",value:function(e,t){return Object(n["a"])({url:e,method:"post",data:t})}},{key:"get",value:function(e,t){return console.log("get:"+e),Object(n["a"])({url:e,method:"get",params:{params:t}})}}]),e}(),u=new o,c=u,p=a("333d"),d={name:"MisTable",props:{url:{required:!0,type:String},tableFields:{required:!0,type:Array},params:{required:!1,type:Object}},components:{Pagination:p["a"]},data:function(){return{list:null,listLoading:!0,queryParams:{},page:{pageNum:1,pageSize:20},total:0}},watch:{params:{deep:!0,immediate:!0,handler:function(e){null!=e&&(this.queryParams=this.params)}}},created:function(){null!=this.params&&(this.queryParams=this.params),this.fetchData()},methods:{setPage:function(e,t){this.page.pageNum=e,this.page.pageSize=t},fetchData:function(){var e=this;this.listLoading=!0,this.queryParams.page=this.page,c.post(this.url,this.queryParams).then((function(t){e.list=t.data.list,e.listLoading=!1,t.data.total&&(e.total=t.data.total)}))},dictOptions:function(e,t){if(console.log(t),null==e)return null;var a={};return e.forEach((function(e){if(e.value===t)return a=e,a})),a}}},m=d,f=a("2877"),b=Object(f["a"])(m,l,r,!1,null,"18c8be47",null);t["a"]=b.exports},a172:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loaded?a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("MisSearch",{attrs:{params:e.queryParams,fields:e.searchFields},on:{click:e.fetchData}}),a("Add",{attrs:{title:"创建用户",size:"small"},on:{close:e.close}})],1),a("MisTable",{ref:"mistable",attrs:{url:"/system/user/page",params:e.queryParams,"table-fields":e.tableFields}},[a("template",{slot:"userType"},[a("el-table-column",{attrs:{label:"用户类型",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v("管理员")]):e._e(),2==t.row.type?a("span",[e._v("普通用户")]):e._e()]}}],null,!1,1592913987)})],1),a("template",{slot:"action"},[a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.userInfo.type||e.userInfo.username==t.row.username?a("Add",{attrs:{title:"编辑",type:"text",model:t.row},on:{close:e.close}}):e._e(),1==e.userInfo.type||e.userInfo.username==t.row.username?a("Password",{staticStyle:{"margin-left":"10px"},attrs:{title:"修改密码",type:"text",model:t.row},on:{close:e.close}}):e._e(),1==e.userInfo.type?a("ex-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",confirm:"确认删除吗"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v(" 删除 ")]):e._e()]}}],null,!1,1542622721)})],1)],2)],1):e._e()},r=[],s=a("c7eb"),i=a("1da1"),n=a("5530"),o=a("82d8"),u=a("66a8"),c={tableFields:[{label:"ID",key:"id",width:"100"},{label:"用户名",key:"username"},{label:"姓名",key:"name"},{label:"所属应用",key:"appName"},{label:"用户类型",key:"userType"},{label:"创建时间",key:"createTime"},{label:"操作",key:"action"}],searchFields:[{label:"ID",key:"id"},{label:"用户名",key:"username"}]},p=c,d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",[a("el-button",{attrs:{type:e.type,size:e.size},on:{click:function(t){e.visible=!0}}},[e._v(" "+e._s(e.title)+" ")]),a("el-dialog",{attrs:{title:e.title,"append-to-body":"",visible:e.visible,"before-close":e.closeAddDialog,"modal-append-to-body":!0},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{disabled:null!=e.form.id},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1),a("el-row",[null==e.form.id?a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1):e._e()],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"类型"}},[a("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[1==e.userInfo.type?a("el-radio",{attrs:{label:1}},[e._v("管理员")]):e._e(),a("el-radio",{attrs:{label:2}},[e._v("普通用户")])],1)],1)],1),2==e.form.type?a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"应用"}},[a("MisSelect",{attrs:{options:e.jobApps},model:{value:e.form.appName,callback:function(t){e.$set(e.form,"appName",t)},expression:"form.appName"}})],1)],1):e._e()],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeAddDialog}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},m=[],f=a("b775");function b(e){return Object(f["a"])({url:"/system/user/create",method:"post",data:e})}function h(e){return Object(f["a"])({url:"/system/user/deleteById",method:"post",data:e})}function g(e){return Object(f["a"])({url:"/system/user/update",method:"post",data:e})}function y(e){return Object(f["a"])({url:"/system/user/updatePassword",method:"post",data:e})}var v=a("4360"),_=a("ee96"),k=a("2f62"),w={components:{MisSelect:_["a"]},props:{size:{required:!1,type:String},type:{required:!1,type:String,default:"primary"},title:{required:!1,type:String},model:{required:!1,type:Object}},data:function(){return{visible:!1,form:{name:"",username:"",type:1,appName:""},jobApps:[],rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,max:64,message:"长度在 6 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:64,message:"长度在 6 到 10 个字符",trigger:"blur"}]}}},computed:Object(n["a"])({},Object(k["b"])(["userInfo"])),created:function(){null!=this.model&&(this.form=this.model),this.jobApps=v["a"].getters.jobApp},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.action()}))},action:function(){var e=this;null==this.form.id?b(this.form).then((function(t){e.$message.success("操作成功"),e.visible=!1,e.$emit("close",1)})):g(this.form).then((function(t){e.$message.success("操作成功"),e.visible=!1,e.$emit("close",1)}))},closeAddDialog:function(){this.visible=!1,this.$emit("close")}}},$=w,j=a("2877"),q=Object(j["a"])($,d,m,!1,null,null,null),S=q.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",[a("el-button",{attrs:{type:e.type,size:e.size},on:{click:function(t){e.visible=!0}}},[e._v(" "+e._s(e.title)+" ")]),a("el-dialog",{attrs:{title:e.title,"append-to-body":"",visible:e.visible,"before-close":e.closeAddDialog,"modal-append-to-body":!0},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"新密码",prop:"password"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeAddDialog}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},O=[],z={props:{size:{required:!1,type:String},type:{required:!1,type:String,default:"primary"},title:{required:!1,type:String},model:{required:!1,type:Object}},data:function(){return{visible:!1,form:{name:"",username:"",type:1,appName:""},jobApps:[],rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:64,message:"长度在 6 到 10 个字符",trigger:"blur"}]}}},computed:Object(n["a"])({},Object(k["b"])(["userInfo"])),created:function(){null!=this.model&&(this.form=this.model),this.jobApps=v["a"].getters.jobApp},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.action()}))},action:function(){var e=this;y(this.form).then((function(t){e.$message.success("操作成功"),e.visible=!1,e.$emit("close",1)}))},closeAddDialog:function(){this.visible=!1,this.$emit("close")}}},P=z,D=Object(j["a"])(P,x,O,!1,null,null,null),A=D.exports,F={components:{Password:A,MisTable:o["a"],MisSearch:u["a"],Add:S},computed:Object(n["a"])({},Object(k["b"])(["userInfo"])),data:function(){return{tableFields:p.tableFields,searchFields:p.searchFields,addDialogVisible:!1,queryParams:{},loaded:!1}},created:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v["a"].dispatch("job/RefreshJobApp");case 2:e.loaded=!0;case 3:case"end":return t.stop()}}),t)})))()},methods:{fetchData:function(){this.$refs.mistable.fetchData()},close:function(e){console.log("close"),null!==e&&(console.log("close22"),this.fetchData())},handleDelete:function(e){var t=this;h({id:e.id}).then((function(e){t.$msg.msgSuccess("删除成功"),t.fetchData()}))}}},N=F,I=Object(j["a"])(N,l,r,!1,null,null,null);t["default"]=I.exports},ee96:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-select",{attrs:{loading:e.loading,filterable:"",disabled:e.disabled,multiple:e.multiple,clearable:"",placeholder:"请选择"},model:{value:e.tmpValue,callback:function(t){e.tmpValue=t},expression:"tmpValue"}},e._l(e.selectOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)},r=[],s={name:"MisSelect",props:{value:{required:!1},options:{required:!1,type:Array},multiple:{required:!1,type:Boolean},disabled:{required:!1,type:Boolean}},model:{prop:"value",event:"change"},data:function(){return{selectOptions:this.options,tmpValue:this.value,loading:!1}},watch:{tmpValue:function(e){this.$emit("change",e)}},created:function(){console.log(this.value)},methods:{}},i=s,n=a("2877"),o=Object(n["a"])(i,l,r,!1,null,"38b0547c",null);t["a"]=o.exports}}]);